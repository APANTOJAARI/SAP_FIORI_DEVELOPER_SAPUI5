sap.ui.define(["sap/ui/core/Fragment","efolder/efol/BSP_SAPMUTILS/model/CoreModel"],(function(e,t){return{init:function(e,t){if(this.oView=e,!this._oPopover){this._oPopover=sap.ui.xmlfragment("efolder/sap/ZEJECUCION_RE/fragment/bucketHR",this),e.addDependent(this._oPopover);var o=new sap.ui.model.json.JSONModel([]);this._oPopover.setModel(o)}},show:function(e,o,i){this._oPopover||this.init(e),t.odataModelHelp.read("/SH_TipoActivoSet",{filters:i.CampoClasif?[new sap.ui.model.Filter("Jerarquia","EQ",i.sJerarquia),new sap.ui.model.Filter("CampoClasif","EQ",i.CampoClasif)]:[new sap.ui.model.Filter("Jerarquia","EQ",i.sJerarquia)],success:function(e){this._oPopover.getModel().setData(e.results)}.bind(this)}),this.functionOk=o,this._oPopover.open()},hide:function(){this._oPopover&&this._oPopover.close()},onExpand:function(e){if(e.getParameter("expand")){var o=e.getSource(),i=o.getBindingContext().getObject();i.nodes||(o.removeAllContent(),t.odataModelHelp.read("/SH_TipoActivoSet",{filters:[new sap.ui.model.Filter("Jerarquia","EQ",i.Jerarquia),new sap.ui.model.Filter("CampoClasif","EQ",i.CampoClasif)],success:function(e){0!==e.results.length&&(i.nodes=e.results,o.addContent((new sap.m.List).bindAggregation("items",{path:"nodes",template:(new sap.m.CustomListItem).addContent(new sap.m.Panel({expandable:!0,expand:this.onExpand.bind(this),backgroundDesign:"Transparent"}).setHeaderToolbar(new sap.m.Toolbar({active:!0,press:this.onPress.bind(this)}).addContent(new sap.m.Title({text:"{Descripcion}"}))))}))),o.getModel().refresh()}.bind(this)}))}},onPress:function(e){this.functionOk(e.getSource().getBindingContext().getObject()),this.hide()}}}));