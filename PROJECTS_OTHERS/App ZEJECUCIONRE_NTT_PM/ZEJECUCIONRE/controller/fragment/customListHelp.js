sap.ui.define(["sap/ui/core/Fragment"],(function(e){return{init:function(e,t){this.oView=e,this._oPopover||(this._oPopover=sap.ui.xmlfragment("efolder/sap/zejecucion_re/fragment/customListHelp",this),e.addDependent(this._oPopover))},show:function(e,t,i,s,o,l,n,a,r,d,p,u,h,c,m){this.field=n,this.internalField=a||"",this.multiselect=!!r,this.selectedValuesMultiSelect=void 0,this._oPopover||this.init(e),this.functionOk=t;try{this.onlyFilterField=m,this.key=s;var v=o.split(";"),f="";if(this.typeFilter=c,u)f={path:l+o,formatter:function(e){var t=new Date;return t.setYear(e.slice(0,4)),t.setMonth(parseInt(e.slice(4,6))-1),t.setDate(e.slice(6,8)),t.toLocaleDateString()}};else for(var F in v)f=f+"\n{"+l+v[F]+"} ";this.text=o;var P=new sap.m.CustomListItem({content:[new sap.m.VBox({items:[new sap.m.Text({text:"{"+l+v[0]+"} "}),new sap.m.Text({text:"{"+l+v[1]+"} "}),new sap.m.Text({text:"{"+l+v[2]+"} "}),new sap.m.Text({text:"{"+l+v[3]+"} "})]}).addStyleClass("sapUiResponsiveMargin sapUiSmallMargin")],title:"{"+l+s+"}",info:f,label:f,type:"Active",selected:"{"+l+"_selected}"}),_=[];if(d)this.additionalFilter=d,_=jQuery.extend(!0,[],d);else this.additionalFilter=void 0,this.keysFilter=void 0,n&&_.push(new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("Field","EQ",n),new sap.ui.model.Filter("Text","EQ",""),new sap.ui.model.Filter("Id","EQ",""),new sap.ui.model.Filter("Type","EQ",a),new sap.ui.model.Filter("Validar","EQ","")],and:!0}));this._oPopover._oList.bindAggregation("items",{path:l+i,template:P,filters:_,events:{dataReceived:function(e){if(this.selectedValuesMultiSelect){var t=this._oPopover._oList.getItems();for(var i in this.selectedValuesMultiSelect)for(var s in t)this.selectedValuesMultiSelect[i].id===t[s].getTitle()&&t[s].setSelected(!0)}}.bind(this)}}),this.multiselect?this._oPopover.setMultiSelect(!0):this._oPopover.setMultiSelect(!1),m||this._oPopover._oList.bindProperty("busy",l+i+"/noBusy",(function(e){return!e})),h?this._oPopover._oSearchField.setVisible(!1):this._oPopover._oSearchField.setVisible(!0),this._oPopover.open()}catch(v){this._oPopover=void 0,this.show(e,t,i,s,o,l,n,a,r,d,p,u,h,c,m)}},hide:function(){this._oPopover&&this._oPopover.close()},closeCustomVHelp:function(e){},confirmCustomVHelp:function(e){this.functionOk(this.multiselect?e.getParameter("selectedItems"):e.getParameter("selectedItem"))},onSearchCustomVHelp:function(e){var t=e.getParameter("itemsBinding");t.aApplicationFilters=[];var i=e.getParameter("value"),s=[];this.additionalFilter&&(s=jQuery.extend(!0,[],this.additionalFilter)),this.field?s.push(new sap.ui.model.Filter({filters:[new sap.ui.model.Filter("CodigoSAP","EQ",this.field),new sap.ui.model.Filter("DescInstalacion","EQ",i),new sap.ui.model.Filter("Matricula","EQ",i),new sap.ui.model.Filter("CodigoGISTAG","EQ",this.internalField)],and:!0})):i&&s.push(new sap.ui.model.Filter({filters:[new sap.ui.model.Filter(this.key,sap.ui.model.FilterOperator.Contains,i)].concat(this.text.split(";").map((e=>new sap.ui.model.Filter(e,sap.ui.model.FilterOperator.Contains,i)))),and:!1})),t.filter(s)},setSelectedValuesMultiSelect:function(e){this.selectedValuesMultiSelect=e},destroyPopup:function(){this._oPopover&&(this._oPopover.destroy(),this._oPopover=void 0)}}}));