sap.ui.define(["sap/ui/base/Object","sap/m/MessageBox"],function(e,s){"use strict";return e.extend("com.centria.CartaPreregistro.controller.ErrorHandler",{constructor:function(e,r){this._oResourceBundle=e.getModel("i18n").getResourceBundle();this._oComponent=e;this._bMessageOpen=false;this._sErrorText=this._oResourceBundle.getText("errorText");for(let t=0;t<r.length;t++){let o=e.getModel(r[t]);if(r[t]===""){o=e.getModel()}o.attachRequestFailed(function(e){var s=e.getParameters();var r=s.response;var t=r.headers;if(t["com.sap.cloud.security.login"]==="login-request"){return false}this._showStandardError(JSON.parse(r.responseText).error.message.value)},this);o.attachBatchRequestCompleted(function(e){var r=e.getParameters();var t=r.response;var o=t.headers;if(o["com.sap.cloud.security.login"]==="login-request"){s.warning("La sesión ha caducado, es necesario recargar la página",{onClose:function(e){window.location.reload()}})}},this)}},_showServiceError:function(e){sap.ui.core.BusyIndicator.hide();if(this._bMessageOpen){return}this._bMessageOpen=true;s.error(this._sErrorText,{id:"serviceErrorMessageBox",details:e,styleClass:this._oComponent.getContentDensityClass(),actions:[s.Action.CLOSE],onClose:function(){this._bMessageOpen=false}.bind(this)})},_showStandardError:function(e){sap.ui.core.BusyIndicator.hide();if(this._bMessageOpen){return}this._bMessageOpen=true;s.error(e,{id:"serviceWarningMessageBox",onClose:function(){this._bMessageOpen=false}.bind(this)})}})});